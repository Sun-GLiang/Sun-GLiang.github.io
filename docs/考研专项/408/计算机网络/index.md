# 计算机网络




## 传输层

### TCP

**TCP使用选择重传**

- A发送了N个报文段，其中第k个报文段丢失，其余N-1个报文段正确按序到达接收方B
    > 使用GBN时，A需要重传分组k以及所有后继分组k+1,k+2,...,N
    > 而TCP至多只需要重传一个报文段，即报文段k














## 应用层


### 不同应用层协议<font color="red">服务器端</font>使用的端口及传输层协议


指的是<font color="red">服务器端</font>的端口

| 应用层 | FTP控制连接 | FTP数据连接 | DNS | HTTP | SMTP | POP3 |
| ------ | ----------- | ----------- | --- | ---- | ---- | ---- |
| 协议   | TCP         | TCP         | UDP | TCP  | TCP  | TCP  |
| 端口号 | 21          | 20          | 53  | 80   | 25   | 110  |


### DNS

- 域名不区分大小写

- 域名向IP地址的转换
    > 形如y.ab.com，客户机为查询得到其IP地址，整个过程共需要发送8个UDP报文段：4个查询报文（第一次是客户机发送，其他三次都是本地域名服务器发送）、4个回答报文
    >> 但是若问到，本地域名服务器时，则当前只发送了3次查询报文

### FTP

- 交互式访问

- 允许客户指明文件类型、格式，允许文件有存储权限

- 在异构网络中的任何计算机之间传送文件

- C/S模式：一个服务器，多个客户进程
    - 服务器进程由两个部分组成：主进程（接收新的请求）、若干从属进程（处理单个请求）；二者间并发进行
        - 服务器必须追踪用户在远程目录树上的位置

- 控制连接：在会话期间一直存在

- 数据连接：数据传送完就关闭连接
    - 主动模式：服务器连接到客户端（客户端主动告诉服务器开放哪个端口）
    - 被动模式：客户端连接到服务器（客户端让服务器打开服务器的某个端口，然后客户端连接这个端口）

- 控制信息是外带传送的（分离的控制连接）



### 电子邮件

**发送邮件过程**

用户->(SMTP、TCP)邮件服务器->(SMTP、TCP)邮件服务器->(POP3或IMAP、TCP)用户代理

**MIME**

SMTP只能发送7位ASCII码，通过MIME，就可以将非ASCII码转化为ASCII码，再交由SMTP进行传送

**POP3**

- 接收方的邮件服务器中运行POP服务器程序，接收方的用户代理必须允许POP客户程序

### HTTP

- cookie可以在无状态的HTTP之上建立一个用户会话层

- HTTP是无状态的：同一个客户第二次访问同一个网站，服务器的响应与第一次相同

- HTTP是无连接的：通信双方在交换HTTP报文之前不需要先建立HTTP连接

- 连接方式
    - 非持续连接（HTTP/1.0）

    - 持续连接（HTTP/1.1）
        - 非流水线方式：每次请求一个对象，1个RTT
        - 流水线方式：请求所有对象，近乎1个RTT

- HTTP请求报文中常用的几个方法
    - GET：请求读取由URL标识的信息
    - HEAD：请求读取由URL标识的信息的首部
    - POST：给服务器添加信息（如注释）
    - CONNECT：代理服务器


